# 心动小镇自动烹饪脚本

这是一个用于心动小镇游戏的自动烹饪脚本，能够自动识别并点击烹饪界面的菜单按钮、食物按钮、开始按钮和完成按钮，实现自动化烹饪流程。

## 新增功能

- **自动切换窗口**：程序启动时会自动查找并切换到"心动小镇"窗口
- **窗口状态检测**：在每次操作前检查游戏窗口是否在前台，如果不在则重新激活
- **更强的点击验证**：点击菜单按钮后会验证是否成功进入食物选择界面
- **错误恢复机制**：当点击无效时，会尝试重新激活窗口并双击按钮
- **更长的等待时间**：增加了点击操作后的等待时间，提高成功率

## 系统要求

- Windows 10/11
- Python 3.8 或更高版本
- 安装所有依赖包

## 安装步骤

1. 确保已安装Python 3.8+
2. 下载或克隆本仓库
3. 安装依赖：
   ```
   pip install -r requirements.txt
   ```

## 使用方法

1. 打开心动小镇游戏，确保游戏窗口已启动并可见
2. 打开命令提示符/PowerShell，进入程序目录
3. 执行以下命令启动脚本：
   ```
   python start.py --food 葡萄酱 --loop 5
   ```
   
   参数说明：
   - `--food`：指定要制作的食物名称，默认为"葡萄酱"
   - `--loop`：指定循环次数，设为-1表示无限循环，默认为1

4. 程序启动后会自动查找并切换到心动小镇窗口
5. 使用Ctrl+Q可以随时退出程序

## 可用食物

目前支持的食物有：
- 葡萄酱
- 提拉米苏
- 紫色浮云卷
- sala

## 问题排查

如果点击按钮没有效果，可能的原因有：

1. 游戏窗口未被正确识别或激活
   - 确保游戏窗口标题包含"心动小镇"
   
2. 游戏分辨率与脚本不匹配
   - 可以尝试修改游戏分辨率或调整模板图像

3. 游戏界面有变化
   - 若游戏更新后界面有变化，可能需要更新模板图像

## 注意事项

- 请确保在运行脚本时不要移动鼠标或使用键盘，以免干扰自动操作
- 脚本运行期间，不要最小化或切换游戏窗口
- 如需定制其他食物，请将对应的食物图标截图保存到foods目录下 